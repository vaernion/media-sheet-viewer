{"version":3,"sources":["components/SearchForm/index.jsx","hooks/useDebounceEffect.js","components/FilmList/FieldHeader.jsx","components/FilmList/FilmListItem.jsx","components/FilmList/index.jsx"],"names":["SearchForm","value","setValue","placeholder","React","state","setState","callback","delay","dependencies","memoized","useCallback","useEffect","debounce","setTimeout","clearTimeout","useDebounceEffect","type","onChange","e","currentTarget","onClick","FieldHeader","props","active","sort","sortBy","field","arrow","isSortReverse","className","onclick","undefined","label","FilmListItem","film","to","id","title","setSearchField","year","director","map","name","key","genre","franchise","FilmList","context","MediaContext","setSortBy","setIsSortReverse","searchField","filmsSortedLocal","setFilmsSortedLocal","filmsFiltered","setFilmsFiltered","document","films","length","sorted","filmsSorted","titleDesc","titleAsc","yearDesc","yearAsc","directorDesc","directorAsc","franchiseDesc","franchiseAsc","filterFilms","handleSort","sortedFilms","toLowerCase","startsWith","filter","findIndex","includes","replace","toString"],"mappings":"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","file":"static/js/3.2128bf3c.chunk.js","sourcesContent":["import * as React from \"react\";\nimport { useDebounceEffect } from \"../../hooks/useDebounceEffect\";\nimport \"./searchForm.css\";\n\nexport function SearchForm({ value, setValue, placeholder }) {\n  const [state, setState] = React.useState(value);\n\n  React.useEffect(() => {\n    setState(value);\n  }, [value]);\n\n  useDebounceEffect(\n    () => {\n      setValue(state);\n    },\n    500,\n    [state]\n  );\n\n  const handleClear = () => {\n    setState(\"\");\n  };\n\n  return (\n    <>\n      <input\n        type=\"text\"\n        placeholder={placeholder}\n        value={state}\n        onChange={(e) => setState(e.currentTarget.value)}\n      />\n      <button onClick={handleClear}>Clear</button>\n    </>\n  );\n}\n","import { useCallback, useEffect } from \"react\";\n\n/**\n * Fire callback when dependencies stay unchanged for duration of delay.\n * @link https://stackoverflow.com/a/61127960\n * @export\n * @param {function} callback\n * @param {number} delay Milliseconds\n * @param {any[]} dependencies\n */\nexport function useDebounceEffect(callback, delay, dependencies) {\n  const memoized = useCallback(callback, dependencies);\n\n  useEffect(() => {\n    const debounce = setTimeout(() => memoized(), delay);\n\n    return () => clearTimeout(debounce);\n  }, [memoized, delay]);\n}\n","import * as React from \"react\";\n\nexport function FieldHeader(props) {\n  let active = props.sort.sortBy === props.field ? true : false;\n  let arrow = active ? (props.sort.isSortReverse ? \"↑\" : \"↓\") : null;\n\n  return (\n    <>\n      <div className={\"fieldHeader film-\" + props.field}>\n        <span\n          className={\"fieldHeaderName\" + (active ? \" active\" : \"\")}\n          onClick={props.onclick ? () => props.onclick(props.field) : undefined}\n        >\n          {props.label} {arrow}\n        </span>\n      </div>\n    </>\n  );\n}\n","import * as React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport \"./filmsList.css\";\n\nexport function FilmListItem(props) {\n  const film = props.film;\n\n  return (\n    <>\n      <div className=\"filmListItem\">\n        <span className=\"filmTitle\">\n          <Link to={`/films/${film.id}`}>{film.title}</Link>\n        </span>\n        <span\n          className=\"filmYear\"\n          onClick={() => props.setSearchField(\"y:\" + film.year)}\n        >\n          {film.year}\n        </span>\n        <span className=\"filmDirector\">\n          {film.director.map((name) => (\n            <Link\n              key={name}\n              className=\"filmDirectorName\"\n              to={`/directors/${name}`}\n            >\n              {name}\n            </Link>\n          ))}\n        </span>\n        <span className=\"filmGenre\">\n          {film.genre.map((name) => (\n            <span\n              key={name}\n              className=\"filmGenreName\"\n              onClick={() => props.setSearchField(\"g:\" + name)}\n            >\n              {name}\n            </span>\n          ))}\n        </span>\n        <span className=\"filmFranchise\">{film.franchise}</span>\n      </div>\n    </>\n  );\n}\n","import * as React from \"react\";\nimport { SearchForm } from \"../SearchForm\";\nimport { MediaContext } from \"../Store\";\nimport { FieldHeader } from \"./FieldHeader\";\nimport { FilmListItem } from \"./FilmListItem\";\nimport \"./filmsList.css\";\n\nexport default function FilmList() {\n  const context = React.useContext(MediaContext);\n\n  const [sortBy, setSortBy] = React.useState(\"sortTitle\");\n  const [isSortReverse, setIsSortReverse] = React.useState(false);\n  const [searchField, setSearchField] = React.useState(\"\");\n  const [filmsSortedLocal, setFilmsSortedLocal] = React.useState(null);\n  const [filmsFiltered, setFilmsFiltered] = React.useState(null);\n\n  document.title = `${context.films.length} Films - MediaSheetViewer`;\n\n  // keep current sorted array in state\n  React.useEffect(() => {\n    setFilmsSortedLocal(\n      (() => {\n        const sorted = context.filmsSorted;\n        switch (sortBy) {\n          case \"sortTitle\":\n            return isSortReverse ? sorted.titleDesc : sorted.titleAsc;\n          case \"year\":\n            return isSortReverse ? sorted.yearDesc : sorted.yearAsc;\n          case \"director\":\n            return isSortReverse ? sorted.directorDesc : sorted.directorAsc;\n          case \"franchise\":\n            return isSortReverse ? sorted.franchiseDesc : sorted.franchiseAsc;\n          default:\n            return context.films;\n        }\n      })()\n    );\n  }, [sortBy, isSortReverse, context.films, context.filmsSorted]);\n\n  // keep current filtered films in state\n  React.useEffect(() => {\n    if (!filmsSortedLocal) return;\n    setFilmsFiltered(filterFilms(filmsSortedLocal, searchField));\n  }, [filmsSortedLocal, searchField]);\n\n  const handleSort = (field) => {\n    if (field === sortBy) {\n      setIsSortReverse(!isSortReverse);\n    } else {\n      setIsSortReverse(false);\n      setSortBy(field);\n    }\n  };\n\n  const filterFilms = (sortedFilms, searchField) => {\n    if (searchField.toLowerCase().startsWith(\"g:\")) {\n      return sortedFilms.filter(\n        (film) =>\n          film.genre.findIndex((genre) =>\n            genre\n              .toLowerCase()\n              .includes(searchField.toLowerCase().replace(\"g:\", \"\"))\n          ) !== -1\n      );\n    } else if (searchField.toLowerCase().startsWith(\"y:\")) {\n      return sortedFilms.filter(\n        (film) => film.year.toString() === searchField.replace(\"y:\", \"\")\n      );\n    } else {\n      return sortedFilms.filter(\n        (film) =>\n          film.title.toLowerCase().includes(searchField.toLowerCase()) ||\n          film.director.findIndex((director) =>\n            director.toLowerCase().includes(searchField.toLowerCase())\n          ) !== -1\n      );\n    }\n  };\n\n  if (!filmsFiltered) return null;\n\n  return (\n    <>\n      <div className=\"filmHeaderContainer\">\n        <div className=\"searchWrapper\">\n          <SearchForm\n            value={searchField}\n            setValue={setSearchField}\n            placeholder=\"examples: star wars | g:drama | hitchcock | y:2010\"\n          />\n        </div>\n        <div className=\"fieldHeadersContainer\">\n          <FieldHeader\n            field=\"sortTitle\"\n            label=\"Title\"\n            onclick={handleSort}\n            sort={{ sortBy, isSortReverse }}\n          />\n          <FieldHeader\n            field=\"year\"\n            label=\"Year\"\n            onclick={handleSort}\n            sort={{ sortBy, isSortReverse }}\n          />\n          <FieldHeader\n            field=\"director\"\n            label=\"Director\"\n            onclick={handleSort}\n            sort={{ sortBy, isSortReverse }}\n          />\n          <FieldHeader\n            field=\"genre\"\n            label=\"Genre\"\n            sort={{ sortBy, isSortReverse }}\n          />\n          <FieldHeader\n            field=\"franchise\"\n            label=\"Franchise\"\n            onclick={handleSort}\n            sort={{ sortBy, isSortReverse }}\n          />\n        </div>\n      </div>\n      <div className=\"filmBodyContainer\">\n        {filmsFiltered\n          // .filter((e) => e.id > 800 && e.id < 1000)\n          .map((film) => (\n            <FilmListItem\n              key={film.id}\n              film={film}\n              setSearchField={setSearchField}\n            />\n          ))}\n      </div>\n    </>\n  );\n}\n"],"sourceRoot":""}
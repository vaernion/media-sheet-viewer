{"version":3,"sources":["components/GamesList/GameListItem.jsx","components/GamesList/index.jsx","components/SearchForm/index.jsx","hooks/useDebounceEffect.js","utils/filters.js","components/FieldHeader/index.jsx"],"names":["GameListItem","props","game","data","setSearchField","className","index","style","to","id","title","onClick","year","developer","map","name","i","key","genre","completed","system","GamesList","dispatch","React","DispatchContext","state","StateContext","filterGames","searchField","document","mediaSheet","games","length","type","payload","handleSort","field","sortGames","gamesSortedLocal","gamesSorted","sortReverseGames","gamesFiltered","rowRenderer","SearchForm","value","setValue","placeholder","FieldHeader","label","width","sort","sortBy","isSortReverse","onclick","height","scrollTop","registerChild","onChildScroll","disableHeight","ref","autoHeight","onScroll","overscanRowCount","rowCount","rowHeight","setState","callback","delay","dependencies","memoized","useCallback","useEffect","debounce","setTimeout","clearTimeout","useDebounceEffect","htmlFor","onChange","e","currentTarget","filterFilms","sortedFilms","searchStr","normalize","startsWith","filter","film","findIndex","includes","replace","toString","director","franchise","filterTv","sortedTv","tv","search","Number","seasons","yearStart","yearEnd","creator","sortedGames","active","arrow","tabIndex","undefined"],"mappings":"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","file":"static/js/7.d605b6f4.chunk.js","sourcesContent":["import * as React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport \"./GamesList.css\";\n\n// export const GameListItem = React.memo(GameListItemRaw);\n\nexport function GameListItem(props) {\n  const game = props.data;\n  const setSearchField = props.setSearchField;\n\n  return (\n    <>\n      <div\n        className={`list-items ${props.index % 2 ? \"\" : \"odd-index\"}`}\n        style={props.style}\n      >\n        <span className=\"game-title\">\n          <Link to={`/games/${game.id}`}>{game.title}</Link> (\n          <span\n            className=\"game-year on-click\"\n            onClick={() => setSearchField(\"y:\" + game.year)}\n          >\n            {game.year}\n          </span>\n          )\n        </span>\n        <span className=\"game-developer\">\n          {game.developer.map((name, i) => (\n            <span key={name}>\n              <span>{i > 0 ? \" & \" : null}</span>\n              <Link to={`/creators/${name}`}>{name}</Link>\n            </span>\n          ))}\n        </span>\n        <span className=\"game-genre\">\n          {game.genre.map((name, i) => (\n            <span key={name}>\n              <span>{i > 0 ? \" / \" : null}</span>\n              <span\n                key={name}\n                className=\"genre-name on-click\"\n                onClick={() => setSearchField(\"g:\" + name)}\n              >\n                {name}\n              </span>\n            </span>\n          ))}\n        </span>\n        <span\n          className=\"game-completed on-click\"\n          onClick={() => setSearchField(game.completed)}\n        >\n          {game.completed}\n        </span>\n        <span\n          className=\"game-system on-click\"\n          onClick={() => setSearchField(game.system)}\n        >\n          {game.system}\n        </span>\n      </div>\n    </>\n  );\n}\n","import * as React from \"react\";\nimport { AutoSizer, List, WindowScroller } from \"react-virtualized\";\nimport \"../../styles/lists.css\";\nimport { filterGames } from \"../../utils/filters.js\";\nimport { FieldHeader } from \"../FieldHeader\";\nimport { SearchForm } from \"../SearchForm\";\nimport { DispatchContext, StateContext } from \"../Store\";\nimport { mediaSheet } from \"../Store/mediaSheet\";\nimport { GameListItem } from \"./GameListItem\";\nimport \"./GamesList.css\";\n\nexport default function GamesList() {\n  const dispatch = React.useContext(DispatchContext);\n  const state = React.useContext(StateContext);\n  const [searchField, setSearchField] = React.useState(state.filterGames);\n\n  document.title = `${mediaSheet.games.length} Games - MediaSheetViewer`;\n\n  // persist filter\n  React.useEffect(() => {\n    dispatch({ type: \"FILTER_GAMES\", payload: searchField });\n  }, [searchField, dispatch]);\n\n  const handleSort = (field) => {\n    if (field === state.sortGames) {\n      dispatch({ type: \"SORT_REVERSE_GAMES\" });\n    } else {\n      dispatch({ type: \"SORT_GAMES\", payload: field });\n    }\n  };\n\n  const gamesSortedLocal =\n    mediaSheet.gamesSorted[\n      state.sortGames + (state.sortReverseGames ? \"Desc\" : \"Asc\")\n    ];\n  const gamesFiltered = filterGames(gamesSortedLocal, searchField);\n\n  const rowRenderer = ({ index, key, style }) => {\n    const game = gamesFiltered[index];\n    return (\n      <GameListItem\n        key={key}\n        index={index}\n        data={game}\n        setSearchField={setSearchField}\n        style={style}\n      />\n    );\n  };\n\n  return (\n    <>\n      <div className=\"games\">\n        <div className=\"games-head\">\n          <SearchForm\n            value={searchField}\n            setValue={setSearchField}\n            placeholder=\"examples: deus ex | g:stealth | arkane | y:1998\"\n          />\n          <div className=\"headers\">\n            <FieldHeader\n              field=\"sortTitle\"\n              label=\"Title\"\n              width=\"20%\"\n              sort={{\n                sortBy: state.sortGames,\n                isSortReverse: state.sortReverseGames,\n              }}\n              onclick={handleSort}\n            />\n            <FieldHeader\n              field=\"year\"\n              label=\"Year\"\n              width=\"10%\"\n              sort={{\n                sortBy: state.sortGames,\n                isSortReverse: state.sortReverseGames,\n              }}\n              onclick={handleSort}\n            />\n            <FieldHeader\n              field=\"developer\"\n              label=\"Developer\"\n              width=\"25%\"\n              sort={{\n                sortBy: state.sortGames,\n                isSortReverse: state.sortReverseGames,\n              }}\n              onclick={handleSort}\n            />\n            <FieldHeader\n              field=\"genre\"\n              label=\"Genre\"\n              width=\"30%\"\n              sort={{\n                sortBy: state.sortGames,\n                isSortReverse: state.sortReverseGames,\n              }}\n            />\n            <FieldHeader\n              field=\"completed\"\n              label=\"Completed\"\n              width=\"10%\"\n              sort={{\n                sortBy: state.sortGames,\n                isSortReverse: state.sortReverseGames,\n              }}\n              onclick={handleSort}\n            />\n            <FieldHeader\n              field=\"system\"\n              label=\"System\"\n              width=\"10%\"\n              sort={{\n                sortBy: state.sortGames,\n                isSortReverse: state.sortReverseGames,\n              }}\n              onclick={handleSort}\n            />\n          </div>\n        </div>\n        <div className=\"games-body\">\n          <WindowScroller>\n            {({ height, scrollTop, registerChild, onChildScroll }) => (\n              <AutoSizer disableHeight>\n                {({ width }) => (\n                  <div ref={registerChild}>\n                    <List\n                      autoHeight\n                      height={height}\n                      width={width}\n                      scrollTop={scrollTop}\n                      onScroll={onChildScroll}\n                      overscanRowCount={50}\n                      rowCount={gamesFiltered.length}\n                      rowHeight={22}\n                      rowRenderer={rowRenderer}\n                    />\n                  </div>\n                )}\n              </AutoSizer>\n            )}\n          </WindowScroller>\n        </div>\n      </div>\n    </>\n  );\n}\n","import * as React from \"react\";\nimport { useDebounceEffect } from \"../../hooks/useDebounceEffect\";\nimport \"./searchForm.css\";\n\nexport function SearchForm({ value, setValue, placeholder }) {\n  const [state, setState] = React.useState(value);\n\n  React.useEffect(() => {\n    setState(value);\n  }, [value]);\n\n  useDebounceEffect(\n    () => {\n      setValue(state);\n    },\n    500,\n    [state]\n  );\n\n  const handleClear = () => {\n    setState(\"\");\n  };\n\n  return (\n    <>\n      <div className=\"searchform\">\n        <label className=\"input-label\" htmlFor=\"searchFormInput\">\n          Filter:\n        </label>\n        <input\n          type=\"text\"\n          id=\"searchFormInput\"\n          placeholder={placeholder}\n          value={state}\n          onChange={(e) => setState(e.currentTarget.value)}\n        />\n        <button onClick={handleClear}>Clear</button>\n      </div>\n    </>\n  );\n}\n","import { useCallback, useEffect } from \"react\";\n\n/**\n * Fire callback when dependencies stay unchanged for duration of delay.\n * @link https://stackoverflow.com/a/61127960\n * @export\n * @param {function} callback\n * @param {number} delay Milliseconds\n * @param {any[]} dependencies\n */\nexport function useDebounceEffect(callback, delay, dependencies) {\n  const memoized = useCallback(callback, dependencies);\n\n  useEffect(() => {\n    const debounce = setTimeout(() => memoized(), delay);\n\n    return () => clearTimeout(debounce);\n  }, [memoized, delay]);\n}\n","import { normalize } from \"./utilities\";\n\nexport const filterFilms = (sortedFilms, searchField) => {\n  const searchStr = normalize(searchField);\n\n  if (searchStr.startsWith(\"g:\")) {\n    return sortedFilms.filter(\n      (film) =>\n        film.genre.findIndex((genre) =>\n          normalize(genre).includes(searchStr.replace(\"g:\", \"\"))\n        ) !== -1\n    );\n  } else if (searchStr.startsWith(\"y:\")) {\n    return sortedFilms.filter(\n      (film) => film.year.toString() === searchStr.replace(\"y:\", \"\")\n    );\n  } else {\n    return sortedFilms.filter(\n      (film) =>\n        normalize(film.title).includes(searchStr) ||\n        film.director.findIndex((director) =>\n          normalize(director).includes(searchStr)\n        ) !== -1 ||\n        normalize(film.franchise).includes(searchStr)\n    );\n  }\n};\n\nexport const filterTv = (sortedTv, searchField) => {\n  const searchStr = normalize(searchField);\n\n  if (searchStr.startsWith(\"g:\")) {\n    return sortedTv.filter(\n      (tv) =>\n        tv.genre.findIndex((genre) =>\n          normalize(genre).includes(searchStr.replace(\"g:\", \"\"))\n        ) !== -1\n    );\n  } else if (searchStr.startsWith(\"y:\")) {\n    return sortedTv.filter((tv) => {\n      const search = Number(searchStr.replace(\"y:\", \"\"));\n\n      return (\n        tv.seasons[0].yearStart <= search &&\n        tv.seasons[tv.seasons.length - 1].yearEnd >= search\n      );\n    });\n  } else if (searchStr.startsWith(\"ys:\")) {\n    return sortedTv.filter(\n      (tv) =>\n        tv.seasons[0].yearStart.toString() === searchStr.replace(\"ys:\", \"\")\n    );\n  } else if (searchStr.startsWith(\"ye:\")) {\n    return sortedTv.filter(\n      (tv) =>\n        tv.seasons[tv.seasons.length - 1].yearEnd.toString() ===\n        searchStr.replace(\"ye:\", \"\")\n    );\n  } else {\n    return sortedTv.filter(\n      (tv) =>\n        normalize(tv.title).includes(searchStr) ||\n        tv.creator.findIndex((creator) =>\n          normalize(creator).includes(searchStr)\n        ) !== -1\n    );\n  }\n};\n\nexport const filterGames = (sortedGames, searchField) => {\n  const searchStr = normalize(searchField);\n\n  if (searchStr.startsWith(\"g:\")) {\n    return sortedGames.filter(\n      (game) =>\n        game.genre.findIndex((genre) =>\n          normalize(genre).includes(searchStr.replace(\"g:\", \"\"))\n        ) !== -1\n    );\n  } else if (searchStr.startsWith(\"y:\")) {\n    return sortedGames.filter(\n      (game) => game.year.toString() === searchStr.replace(\"y:\", \"\")\n    );\n  } else {\n    return sortedGames.filter(\n      (game) =>\n        normalize(game.title).includes(searchStr) ||\n        game.developer.findIndex((developer) =>\n          normalize(developer).includes(searchStr)\n        ) !== -1 ||\n        normalize(game.completed).includes(searchStr) ||\n        normalize(game.system).includes(searchStr)\n    );\n  }\n};\n","import * as React from \"react\";\nimport \"./FieldHeader.css\";\n\nexport function FieldHeader(props) {\n  const active = props.sort.sortBy === props.field ? true : false;\n  const arrow = active ? (props.sort.isSortReverse ? \"↑\" : \"↓\") : null;\n\n  return (\n    <>\n      <span className={\"fheader-outer\"} style={{ width: props.width }}>\n        <span\n          tabIndex={0}\n          className={\n            \"fheader\" +\n            (active ? \" active\" : \"\") +\n            (!props.onclick ? \" no-click\" : \"\")\n          }\n          onClick={props.onclick ? () => props.onclick(props.field) : undefined}\n        >\n          {props.label} {arrow}\n        </span>\n      </span>\n    </>\n  );\n}\n"],"sourceRoot":""}